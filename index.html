<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow"> <!-- Permite que o Googlebot indexe a página -->
    <meta name="description" content="Editor de Código online com Monaco Editor, permitindo a execução de JavaScript e visualização da saída de forma interativa.">
    <meta name="keywords" content="editor de código, Monaco, programação, JavaScript, programação online, execução de código, console log">
    
    <!-- Localização -->
    <meta name="geo.region" content="BR-MT"> <!-- Estado de Mato Grosso (BR-MT) -->
    <meta name="geo.placename" content="Jaciara, Dom Aquino, Juscimeira, Rondonópolis, Cuiabá">
    <meta name="geo.position" content="-15.8827;-56.1070"> <!-- Coordenadas aproximadas de Cuiabá, MT -->
    <meta name="ICBM" content="15.8827, -56.1070"> <!-- Coordenadas de Cuiabá -->

    <!-- Categoria -->
    <meta name="category" content="Editor de Código, Programação, Desenvolvimento Web, Ferramentas de Programação">

    <meta name="author" content="Seu Nome ou Empresa">
    <meta property="og:title" content="Editor de Código com Monaco - Programação Online">
    <meta property="og:description" content="Ferramenta avançada para edição e execução de código JavaScript online.">
    <meta property="og:image" content="URL_da_imagem_de_visualização.jpg">
    <meta property="og:url" content="URL_da_página_atual">
    <meta property="og:type" content="website">

    <title>Editor de Código com Monaco</title>

    <!-- 1. Bootstrap CSS (Estilos prontos e responsivos) -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">

    <!-- 2. Materialize CSS (Design Material, UI pronto) -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css" rel="stylesheet">

    <!-- 3. Tailwind CSS (Design personalizável e gradientes) -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- 4. Animate.css (Animações) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">

    <!-- 5. Monaco Editor (Editor de código avançado) -->
    <script src="https://cdn.jsdelivr.net/npm/monaco-editor@0.37.1/min/vs/loader.js"></script>

    <!-- 6. FontAwesome (Ícones) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">

    <!-- 7. jQuery (Para manipulação mais fácil do DOM) -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

    <!-- 8. AngularJS (Estrutura MVC para manipulação dinâmica) -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>

    <!-- 9. Angular Material (UI prontos para interação) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-material/1.1.26/angular-material.min.js"></script>

    <!-- 10. Angular Animate (Suporte a animações no Angular) -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular-animate.min.js"></script>

    <!-- 11. Angular Aria (Melhor acessibilidade) -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular-aria.min.js"></script>

    <!-- 12. Angular Touch (Apoio para dispositivos móveis e interações de toque) -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular-touch.min.js"></script>

    <!-- 13. Angular Route (Gerenciamento de rotas) -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular-route.min.js"></script>

    <!-- 14. Angular Messages (Facilita a exibição de mensagens com validação) -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular-messages.min.js"></script>

    <style>
        body {
            font-family: 'Arial', sans-serif;
            background: #f8f9fa; /* Cor de fundo mais clara e neutra */
        }
        .editor-container {
            margin-top: 20px;
            height: 500px;
        }
        #codeEditor {
            height: 100%;
        }
        .gradient-bg {
            background: linear-gradient(45deg, #ff6b6b, #f7b7a3);
        }
        .error-message {
            color: red;
            font-weight: bold;
        }
        .output-container {
            margin-top: 20px;
            padding: 10px;
            background-color: #e3e3e3;
            border-radius: 8px;
            max-height: 300px;
            overflow-y: auto;
        }
        .output {
            background-color: #333;
            color: white;
            padding: 15px;
            font-family: monospace;
            border-radius: 8px;
            height: 100%;
            white-space: pre-wrap; /* Permite que o texto se quebre automaticamente */
            word-wrap: break-word;
        }
    </style>
</head>
<body ng-app="codeEditorApp" class="bg-light gradient-bg">

    <div class="container mt-5" ng-controller="CodeEditorController">
        <h2 class="text-center text-dark animate__animated animate__fadeIn">Editor de Código com Monaco</h2>
        
        <!-- Editor de Código -->
        <div class="editor-container">
            <div id="codeEditor"></div>
        </div>

        <!-- Botões para Compilar e Limpar -->
        <div class="text-center mt-3">
            <button class="btn btn-primary" ng-click="compileCode()">Compilar</button>
            <button class="btn btn-secondary" ng-click="clearCode()">Limpar</button>
        </div>

        <!-- Seção de Erro -->
        <div class="output-container" ng-if="errorMessage">
            <h5 class="error-message">Erro:</h5>
            <pre>{{errorMessage}}</pre>
        </div>

        <!-- Saída do Código -->
        <div class="output-container" ng-if="output">
            <h5>Saída:</h5>
            <pre class="output" id="outputArea">{{output}}</pre>
        </div>

        <!-- Botão para sair e voltar ao login -->
        <div class="text-center mt-3">
            <button class="btn btn-danger" id="logoutButton">Sair</button>
        </div>
    </div>

    <!-- Materialize JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

    <script>
        // AngularJS App
        var app = angular.module('codeEditorApp', ['ngAnimate', 'ngAria']);

        // Controller
        app.controller('CodeEditorController', function($scope) {
            // Inicializando variáveis
            $scope.code = '';
            $scope.output = '';
            $scope.errorMessage = '';

            // Função para compilar o código
            $scope.compileCode = function() {
                $scope.errorMessage = '';
                $scope.output = '';

                // Interceptando o console.log para capturar logs
                var originalLog = console.log;
                console.log = function(message) {
                    $scope.$apply(function() {
                        $scope.output += message + '\n'; // Adiciona cada mensagem de log à saída
                    });
                    originalLog.apply(console, arguments); // Mantém o log no console para depuração
                };

                try {
                    // Executa o código inserido no Monaco Editor
                    eval($scope.code);  // Executa o código JS
                } catch (error) {
                    // Exibe erro, se houver
                    $scope.errorMessage = error.message;
                }
            };

            // Função para limpar o editor
            $scope.clearCode = function() {
                $scope.code = '';
                $scope.output = '';
                $scope.errorMessage = '';
                document.getElementById('outputArea').innerHTML = '';  // Limpa a saída na tela
            };
        });

        // Função para logout
        document.getElementById("logoutButton").addEventListener("click", function() {
            localStorage.removeItem("userEmail");
            localStorage.removeItem("userPassword");
            window.location.href = 'index.html'; // Redireciona para a página de login
        });

        // Verificar se o usuário está autenticado
        if (!localStorage.getItem("userEmail")) {
            // Redirecionar para login se não estiver autenticado
            window.location.href = 'index.html';
        }

        // Carregar Monaco Editor
        require.config({ paths: { vs: 'https://cdn.jsdelivr.net/npm/monaco-editor@0.37.1/min/vs' }});
        require(['vs/editor/editor.main'], function () {
            var editor = monaco.editor.create(document.getElementById('codeEditor'), {
                value: [
                    'function helloWorld() {',
                    '   console.log("Olá, Mundo!");',
                    '}',
                    '',
                    'helloWorld();'
                ].join('\n'),
                language: 'javascript',
                theme: 'vs-dark', // Tema escuro
                automaticLayout: true
            });

            // Atualizar o código no Angular quando o editor Monaco mudar
            editor.onDidChangeModelContent(function() {
                $scope.$apply(function() {
                    $scope.code = editor.getValue();
                });
            });
        });
    </script>
</body>
    </html>
